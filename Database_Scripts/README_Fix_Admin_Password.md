# إصلاح مشكلة تسجيل دخول المستخدم admin

## المشكلة
المستخدم admin لا يستطيع تسجيل الدخول بكلمة المرور "123" بسبب أن كلمة المرور مخزنة في قاعدة البيانات بدون تشفير صحيح.

## الحل

### الطريقة الأولى: إعادة إنشاء المستخدم admin (الأسهل والأكثر أماناً)

1. شغل التطبيق
2. اذهب إلى الرابط التالي في المتصفح:
   ```
   https://localhost:5001/Account/RecreateAdminUser
   ```
   أو
   ```
   http://localhost:5000/Account/RecreateAdminUser
   ```

3. ستظهر رسالة نجاح مع تفاصيل إعادة الإنشاء
4. جرب تسجيل الدخول الآن بـ admin / 123

### الطريقة الثانية: استخدام الـ Endpoint المؤقت لتحديث كلمة المرور

1. شغل التطبيق
2. اذهب إلى الرابط التالي في المتصفح:
   ```
   https://localhost:5001/Account/FixAdminPassword
   ```
   أو
   ```
   http://localhost:5000/Account/FixAdminPassword
   ```

3. ستظهر رسالة نجاح مع تفاصيل التحديث
4. جرب تسجيل الدخول الآن بـ admin / 123

### الطريقة الثالثة: الحصول على كلمة المرور المشفرة يدوياً

1. اذهب إلى الرابط التالي:
   ```
   https://localhost:5001/Account/GetHashedPassword
   ```

2. انسخ قيمة `hashedPassword` من النتيجة
3. استخدم هذا السكريبت SQL لتحديث قاعدة البيانات:

```sql
UPDATE users 
SET passwordhash = 'PASTE_HASHED_PASSWORD_HERE'
WHERE username = 'admin';
```

### الطريقة الرابعة: استخدام سكريبت SQL مباشرة

1. افتح ملف `Database_Scripts/Fix_Admin_Password.sql`
2. احصل على كلمة المرور المشفرة من endpoint `GetHashedPassword`
3. استبدل `YOUR_HASHED_PASSWORD_HERE` بالكلمة المشفرة
4. نفذ السكريبت في قاعدة البيانات

## التحقق من الحل

بعد تطبيق أي من الطرق أعلاه:
1. اذهب إلى صفحة تسجيل الدخول
2. أدخل:
   - Username: `admin`
   - Password: `123`
3. يجب أن تتمكن من تسجيل الدخول بنجاح

## ملاحظات مهمة

- هذه endpoints مؤقتة وللإصلاح فقط
- يجب حذف هذه endpoints بعد إصلاح المشكلة
- تم إصلاح كود إنشاء المستخدمين الجدد في `Program.cs` ليتجنب هذه المشكلة في المستقبل